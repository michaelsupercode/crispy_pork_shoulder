class w{constructor(){this.bannerConfig={desktop:{article_2:{id:1712566778481,size:[[728,90],[300,250]],name:"d_Falstaff_Article2_300x250"},article_5:{id:1711706673913,size:[[728,90],[300,250]],name:"d_Falstaff_Article5_300x250"}},mobile:{article_2:{id:1712566843991,size:[300,250],name:"m_Falstaff_Article2_300x250_300x600"},article_5:{id:1711706715659,size:[300,600],name:"m_Falstaff_Article5_300x250_300x600"}}}}async initOnLoad(){const t=this;this.initArticleInlineAds();const n=new IntersectionObserver(function(o){o[0].isIntersecting===!0&&(t.initTaboolaAds(),n.unobserve(document.querySelector(".article-slider")))});n.observe(document.querySelector(".article-slider"))}initArticleInlineAds(){if(document.body.classList.contains("noads"))return;const t=document.querySelectorAll(".article-detail__content p");if(t.length<=1)return;let n=[];window.pbjs.adserverCalled=[];let o="desktop";window.matchMedia("(max-width: 1023px)").matches&&(o="mobile"),googletag.cmd.push(()=>l(this.bannerConfig));function l(s){let r=[{item:t[1],position:"article_2"}];if(t.length>5){let i=null;for(let e=4;e<t.length;e++){if(i!==null)continue;let a=t[e].innerHTML.replace(/(<([^>]+)>)/igm,"");console.log("Paragraph Nr "+(e+1)+": content length -> "+a.length),a.length>=100&&e<t.length-1&&(i=t[e],r.push({item:t[e],position:"article_5"}))}}r.filter(i=>!!i.item).forEach(i=>{c(i,s)})}function c(s,r){const i=r[o][s.position];if(!i||n.includes(i.id))return;const e=`div-gpt-ad-${i.id}-0`,a=document.createElement("div");a.setAttribute("class","banner square"),a.classList.add(o),a.setAttribute("id",e),s.item.insertAdjacentElement("afterend",a);const u=new IntersectionObserver(function(p){p[0].isIntersecting===!0&&(googletag.cmd.push(()=>{const d=[],m=googletag.defineSlot(`/22462749184/${i.name}`,i.size,e).addService(googletag.pubads());a.classList.contains("no-collapse")&&m.setCollapseEmptyDiv(!1),d.push(m.addService(googletag.pubads())),googletag.display(e),u.unobserve(document.querySelector("#"+e));function f(g){window.pbjs.adserverCalled[e]!==!0&&(window.pbjs.adserverCalled[e]=!0,googletag.pubads().refresh(g))}window.pbjs.que.push(function(){window.pbjs.rp.requestBids({callback:f,gptSlotObjects:d})}),setTimeout(()=>f(d),3500)}),n.push(i.id),googletag.pubads().addEventListener("slotRenderEnded",d=>{a.classList.add("ad-slot-loaded"),a.classList.add("mb-4")}))},{threshold:[0],rootMargin:"200px 0px 0px 0px"});u.observe(document.querySelector("#"+e))}}initTaboolaAds(){if(document.body.classList.contains("notaboola"))return;window._taboola=window._taboola||[],_taboola.push({article:"auto"}),function(o,l,c,s){document.getElementById(s)||(o.async=1,o.src=c,o.id=s,l.parentNode.insertBefore(o,l))}(document.createElement("script"),document.getElementsByTagName("script")[0],"//cdn.taboola.com/libtrc/falstaff-network/loader.js","tb_loader_script"),window.performance&&typeof window.performance.mark=="function"&&window.performance.mark("tbl_ic");let t=document.querySelector(".article-slider");if(!t)return;t.innerHTML+='<br><br><div class="container"><div class="row"><div class="col-12"><div id="taboola-below-article-thumbnails"></div></div></div></div>',_taboola.push({mode:"alternating-thumbnails-a",container:"taboola-below-article-thumbnails",placement:"Below Article Thumbnails",target_type:"mix"});let n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src","//cdn.taboola.com/libtrc/falstaff-falstaffcom/loader.js"),n.setAttribute("async","true"),document.body.appendChild(n)}}const h=new w;window.addEventListener("load",b=>{h.initOnLoad()});
